---
title: "Planifier des projets à exécuter automatiquement | Microsoft Docs"
description: "Les tâches planifiées sont gérées par la file d'attente des travaux. Ces projets exécutent des états et des codeunits. Vous pouvez définir des projets à exécuter une fois, ou sur une base récurrente."
author: edupont04
ms.service: dynamics365-financials
ms.topic: article
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: 
ms.date: 09/01/2017
ms.author: edupont
ms.translationtype: HT
ms.sourcegitcommit: 2c13559bb3dc44cdb61697f5135c5b931e34d2a8
ms.openlocfilehash: 6dc45cfcff07bfb36f363121298cd0f68b9ce7fe
ms.contentlocale: fr-ch
ms.lasthandoff: 09/22/2017

---
# <a name="use-job-queues-to-schedule-tasks"></a><span data-ttu-id="c9906-105">Utiliser des files d'attente des travaux pour planifier des tâches</span><span class="sxs-lookup"><span data-stu-id="c9906-105">Use Job Queues to Schedule Tasks</span></span>
<span data-ttu-id="c9906-106">Des files d'attente des travaux dans [!INCLUDE[d365fin](includes/d365fin_md.md)] permettent aux utilisateurs de planifier et d'exécuter des états et codeunits spécifiques.</span><span class="sxs-lookup"><span data-stu-id="c9906-106">Job queues in [!INCLUDE[d365fin](includes/d365fin_md.md)] enables users to schedule and run specific reports and codeunits.</span></span> <span data-ttu-id="c9906-107">Vous pouvez définir des projets à exécuter une fois, ou sur une base récurrente.</span><span class="sxs-lookup"><span data-stu-id="c9906-107">You can set jobs to run one time, or on a recurring basis.</span></span> <span data-ttu-id="c9906-108">Par exemple, vous pouvez être amené à exécuter l'état **Vendeurs : Statistiques ventes** chaque semaine pour suivre les ventes hebdomadaires d'un vendeur, ou vous pouvez être amené à exécuter le codeunit **Traiter file att. e-mails serv** chaque jour pour vérifier si des e mails adressés aux clients concernant leurs commandes service sont envoyés en temps utile.</span><span class="sxs-lookup"><span data-stu-id="c9906-108">For example, you might want to run the **Salesperson - Sales Statistics** report weekly, to track sales by salesperson each week, or you might want to run the **Process Service E-mail Queue** codeunit daily, to make sure pending email messages to customers regarding their service orders are sent out in a timely manner.</span></span>  

## <a name="add-jobs-to-the-job-queue"></a><span data-ttu-id="c9906-109">Ajouter des projets à la file d'attente des travaux</span><span class="sxs-lookup"><span data-stu-id="c9906-109">Add Jobs to the Job Queue</span></span>
<span data-ttu-id="c9906-110">La fenêtre **Écritures file d'attente des travaux** répertorie tous les projets existants.</span><span class="sxs-lookup"><span data-stu-id="c9906-110">The **Job Queue Entries** window lists all existing jobs.</span></span> <span data-ttu-id="c9906-111">Si vous ajoutez une nouvelle écriture file d'attente des travaux que vous voulez planifier, vous devez spécifier des informations sur le type d'objet à exécuter, par exemple un état ou un codeunit et le nom et l'ID de l'objet que vous voulez exécuter.</span><span class="sxs-lookup"><span data-stu-id="c9906-111">If you add a new job queue entry that you want to schedule, you must specify information about the type of object you want to run, such as a report or codeunit, and the name and object ID of the object that you want to run.</span></span> <span data-ttu-id="c9906-112">Vous pouvez également ajouter des paramètres pour spécifier le comportement de la file d'attente des travaux.</span><span class="sxs-lookup"><span data-stu-id="c9906-112">You can also add parameters to specify the behavior of the job queue entry.</span></span> <span data-ttu-id="c9906-113">Par exemple, vous pouvez ajouter un paramètre pour envoyer uniquement des commandes vente validées.</span><span class="sxs-lookup"><span data-stu-id="c9906-113">For example, you can add a parameter to only send posted sales orders.</span></span> <span data-ttu-id="c9906-114">Vous devez être autorisé à exécuter l'état ou le codeunit spécifié, sans quoi une erreur est renvoyée lors de l'exécution de la file projets.</span><span class="sxs-lookup"><span data-stu-id="c9906-114">You must have permission to run the particular report or codeunit, or an error will be returned when the job queue is run.</span></span>  

<span data-ttu-id="c9906-115">Vous pouvez éventuellement définir un filtre dans le champ **Filtre catégorie de la file d'attente des travaux**.</span><span class="sxs-lookup"><span data-stu-id="c9906-115">Optionally, you can set a filter in the **Job Queue Category Filter** field.</span></span> <span data-ttu-id="c9906-116">Les catégories de file d'attente des travaux peuvent être utilisées pour regrouper les projets de la liste.</span><span class="sxs-lookup"><span data-stu-id="c9906-116">Job queue categories can be used to group jobs in the list.</span></span>

[!INCLUDE[d365fin](includes/d365fin_md.md)]<span data-ttu-id="c9906-117"> exécute automatiquement les projets selon le planning spécifié pour chaque écriture file d'attente des travaux.</span><span class="sxs-lookup"><span data-stu-id="c9906-117"> automatically runs the jobs according to the specified schedules for each job queue entry.</span></span> <span data-ttu-id="c9906-118">Vous pouvez également démarrer, arrêter et mettre en attente manuellement une écriture file d'attente des travaux.</span><span class="sxs-lookup"><span data-stu-id="c9906-118">You can also start, stop, and put a job queue entry on hold manually.</span></span>

### <a name="log-files"></a><span data-ttu-id="c9906-119">Fichiers journaux</span><span class="sxs-lookup"><span data-stu-id="c9906-119">Log Files</span></span>
<span data-ttu-id="c9906-120">Les erreurs sont répertoriées dans la fenêtre **Écritures journal file d'attente des travaux** qui est accessible à partir du ruban.</span><span class="sxs-lookup"><span data-stu-id="c9906-120">Errors are listed in the **Job Queue Log Entries** window that you can access from the ribbon.</span></span> <span data-ttu-id="c9906-121">Vous pouvez également résoudre les erreurs de la file d'attente des travaux.</span><span class="sxs-lookup"><span data-stu-id="c9906-121">You can also troubleshoot job queue errors.</span></span> <span data-ttu-id="c9906-122">Les données générées lors de l'exécution d'une file d'attente des travaux sont stockées dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="c9906-122">Data that is generated when a job queue is run is stored in the database.</span></span>  

### <a name="background-posting-with-job-queues"></a><span data-ttu-id="c9906-123">Validation en arrière-plan avec les files d'attente des travaux</span><span class="sxs-lookup"><span data-stu-id="c9906-123">Background Posting with Job Queues</span></span>
<span data-ttu-id="c9906-124">Les files d'attente des travaux sont un outil efficace pour planifier le travail des processus métier en arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="c9906-124">Job queues are an effective tool to schedule the running of business processes in the background.</span></span> <span data-ttu-id="c9906-125">Par exemple, il peut y avoir une circonstance selon laquelle plusieurs utilisateurs essaient de valider des commandes vente en même temps, mais uniquement une commande peut être traitée à la fois.</span><span class="sxs-lookup"><span data-stu-id="c9906-125">For example, there may be an instance in which multiple users are trying to post sales orders at the same time, but only one order can be processed at a time.</span></span> <span data-ttu-id="c9906-126">En configurant une routine de validation en arrière-plan, vous pouvez placer les validations dans une file d'attente pour les traiter en arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="c9906-126">By setting up a background posting routine, you can place the postings in a queue for processing in the background.</span></span>  

 <span data-ttu-id="c9906-127">Sinon, vous pouvez planifier des validations à des heures pratiques pour votre organisation.</span><span class="sxs-lookup"><span data-stu-id="c9906-127">Alternatively, you may want to schedule postings for hours when it is convenient for your organization.</span></span> <span data-ttu-id="c9906-128">Par exemple, il peut sembler raisonnable dans votre activité d'exécuter certaines routines lorsque la plupart de la saisie de données de la journée est achevée.</span><span class="sxs-lookup"><span data-stu-id="c9906-128">For example, it may make sense in your business to run certain routines when most of the data entry for the day has concluded.</span></span> <span data-ttu-id="c9906-129">Vous pouvez obtenir cette opération en configurant la file projets pour exécuter différents états de validation par lots, par exemple, **TPL valider commandes vente**, **TPL valider factures vente**et les états **TPL valider avoirs vente**.</span><span class="sxs-lookup"><span data-stu-id="c9906-129">You can achieve this by setting the job queue up to run various batch post reports, such as the **Batch Post Sales Orders**, **Batch Post Sales Invoices**, and **Batch Post Sales Credit Memos** reports.</span></span>  

 [!INCLUDE[d365fin](includes/d365fin_md.md)]<span data-ttu-id="c9906-130"> prend en charge la validation en arrière\-plan pour les types de document suivants :</span><span class="sxs-lookup"><span data-stu-id="c9906-130"> supports background posting for the following document types:</span></span>  

-   <span data-ttu-id="c9906-131">Ventes : commande, retour, avoir et facture vente</span><span class="sxs-lookup"><span data-stu-id="c9906-131">Sales: sales order, return order, credit memo, invoice</span></span>  

-   <span data-ttu-id="c9906-132">Achats : commande, retour, avoir et facture achat</span><span class="sxs-lookup"><span data-stu-id="c9906-132">Purchases: purchase order, return order, credit memo, invoice</span></span>  

 <span data-ttu-id="c9906-133">Si la file d'attente des travaux ne peut pas valider la commande vente, le statut passe à **Erreur**, et la commande vente est ajoutée à la liste des commandes vente que l'utilisateur doit traiter.</span><span class="sxs-lookup"><span data-stu-id="c9906-133">If the job queue cannot post the sales order, the status is changed to **Error**, and the sales order is added to the list of sales orders that the user will have to handle.</span></span>  

> [!NOTE]  
>  <span data-ttu-id="c9906-134">Lorsque vous planifiez un document pour validation et que le processus de validation débute, la routine de validation est automatiquement configurée pour expirer dans les deux heures si elle arrête de répondre pour une raison quelconque.</span><span class="sxs-lookup"><span data-stu-id="c9906-134">When you schedule a document for posting and the posting process begins, the posting routine is automatically configured to time out within two hours if the posting routine stops responding for any reason.</span></span>  

<span data-ttu-id="c9906-135">Vous définissez cette utilisation de la file d'attente des travaux dans la fenêtre **Paramètres ventes** ou la fenêtre **Achats**, respectivement.</span><span class="sxs-lookup"><span data-stu-id="c9906-135">You set up this use of the job queue in the **Sales & Receivables Setup** window or the **Purchases & Payables** window, respectively.</span></span> <span data-ttu-id="c9906-136">Sur le raccourci **Validation arrière-plan**, activez la case à cocher **Valider les documents via file projets**, puis entrez les informations appropriées.</span><span class="sxs-lookup"><span data-stu-id="c9906-136">On the **Background Posting** FastTab, you choose the **Post Documents via Job Queue** check box and then fill in the relevant information.</span></span> <span data-ttu-id="c9906-137">Vous pouvez aussi utiliser le champ **Code catégorie de la file d'attente des travaux** pour exécuter toutes les écritures file d'attente des travaux avec ce code.</span><span class="sxs-lookup"><span data-stu-id="c9906-137">Here you can also use the **Job Queue Category Code** field to run all job queue entries with that code.</span></span> <span data-ttu-id="c9906-138">Par exemple, vous pouvez utiliser une catégorie **SalesPost** qui filtre toutes les commandes vente correspondant à n'importe quelle file d'attente des travaux ayant le même code catégorie.</span><span class="sxs-lookup"><span data-stu-id="c9906-138">For example, you can use  a **SalesPost** category that filters to all sales orders that match any job queue that has the same category code.</span></span>  

> [!IMPORTANT]  
>  <span data-ttu-id="c9906-139">Si vous paramétrez un projet qui valide et imprime des documents et que l'imprimante affiche une boîte de dialogue, par exemple une demande d'informations d'identification ou un alerte à propos de la quantité faible d'encre, votre document est validé mais non imprimé.</span><span class="sxs-lookup"><span data-stu-id="c9906-139">If you set up a job that will post and print documents, and the printer displays a dialog box, such as a request for credentials or a warning about low printer ink, your document is posted but not printed.</span></span> <span data-ttu-id="c9906-140">L'écriture file d'attente de travaux correspondante expire et la valeur du champ **Statut** devient **Erreur**.</span><span class="sxs-lookup"><span data-stu-id="c9906-140">The corresponding job queue entry eventually times out and the **Status** field is set to **Error**.</span></span> <span data-ttu-id="c9906-141">Par conséquent, nous vous recommandons de ne pas utiliser une configuration de l'imprimante nécessitant une interaction avec les boîtes de dialogue de l'imprimante relatives à la validation en arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="c9906-141">Accordingly, we recommend that you do not use a printer setup that requires interaction with the display of printer dialog boxes in conjunction with background posting.</span></span>  

## <a name="use-the-my-job-queue-part"></a><span data-ttu-id="c9906-142">Utiliser le composant Ma file d'attente des travaux</span><span class="sxs-lookup"><span data-stu-id="c9906-142">Use the My Job Queue Part</span></span>
<span data-ttu-id="c9906-143">Le composant **Ma file d'attente des travaux** répertorie les écritures files d'attente des travaux commencées par un utilisateur, mais qui ne sont pas terminées.</span><span class="sxs-lookup"><span data-stu-id="c9906-143">The **My Job Queue** part shows the job queues entries that a user has started, but which are not yet finished.</span></span> <span data-ttu-id="c9906-144">Par défaut, le composant n'est pas visible et vous devez donc l'ajouter à votre tableau de bord.</span><span class="sxs-lookup"><span data-stu-id="c9906-144">By default, the part is not visible, so you have to add it to your Role Center.</span></span> <span data-ttu-id="c9906-145">Pour plus d'informations, reportez-vous à [Procédure : modifier des tableaux de bord](change-role.md).</span><span class="sxs-lookup"><span data-stu-id="c9906-145">For more information, see [How to: Change Role Centers](change-role.md).</span></span>  

<span data-ttu-id="c9906-146">Dans ce composant, vous pouvez visualiser les documents en cours de traitement ou en attente, pour lesquels votre ID est spécifié dans le champ **Code utilisateur affecté**.</span><span class="sxs-lookup"><span data-stu-id="c9906-146">In this part, you can see those documents that are being processed or that are queued for which your ID is specified in the **Assigned User ID** field.</span></span> <span data-ttu-id="c9906-147">Le composant vous permet de suivre toutes les écritures de file projet, y compris celles liées à la validation en arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="c9906-147">The part helps you keep track of all job queue entries, including those related to background posting.</span></span> <span data-ttu-id="c9906-148">Le composant peut vous indiquer rapidement s’il y a eu une erreur lors de la validation d’un document ou s’il existe des erreurs dans une écriture de file projet.</span><span class="sxs-lookup"><span data-stu-id="c9906-148">The part can tell you at a glance whether there has been an error in the posting of a document or if there are errors in a job queue entry.</span></span> <span data-ttu-id="c9906-149">Il vous permet également d'annuler une validation de document en cas de non exécution.</span><span class="sxs-lookup"><span data-stu-id="c9906-149">The part also lets you cancel a document posting if it is not running.</span></span>  

## <a name="security"></a><span data-ttu-id="c9906-150">Sécurité</span><span class="sxs-lookup"><span data-stu-id="c9906-150">Security</span></span>  
<span data-ttu-id="c9906-151">Les écritures file d'attente des travaux s'exécutent sur la base d'autorisations.</span><span class="sxs-lookup"><span data-stu-id="c9906-151">Job queue entries run based on permissions.</span></span> <span data-ttu-id="c9906-152">Ces autorisations doivent permettre l'exécution de l'état ou du codeunit.</span><span class="sxs-lookup"><span data-stu-id="c9906-152">Those permissions must allow the execution of the report or codeunit.</span></span>  

<span data-ttu-id="c9906-153">Lorsqu'une file d'attente des travaux est activée manuellement, elle s'exécute avec les informations d'identification de l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c9906-153">When a job queue is activated manually, it is run with the credentials of the user.</span></span> <span data-ttu-id="c9906-154">Lorsqu'une file d'attente des travaux est activée en tant que tâche planifiée, elle s'exécute avec les informations d'identification de l'instance du serveur.</span><span class="sxs-lookup"><span data-stu-id="c9906-154">When a job queue is activated as a scheduled task, it is run with the credentials of the server instance.</span></span> <span data-ttu-id="c9906-155">Un projet s'exécute avec les informations d'identification de la file d'attente des travaux qui l'active.</span><span class="sxs-lookup"><span data-stu-id="c9906-155">When a job is run, it is run with the credentials of the job queue that activates it.</span></span> <span data-ttu-id="c9906-156">L'utilisateur qui a créé cette écriture file d'attente des travaux doit toutefois disposer d'autorisations.</span><span class="sxs-lookup"><span data-stu-id="c9906-156">However, the user who created that job queue entry must also have permissions.</span></span> <span data-ttu-id="c9906-157">Lorsqu'un projet est exécuté dans la session utilisateur (par exemple, durant la validation en arrière plan), il est exécuté avec les informations d'identification de l'utilisateur qui a créé ce projet.</span><span class="sxs-lookup"><span data-stu-id="c9906-157">When a job is “run in user session” (such as during background posting), it is run with the credentials of the user who created that job.</span></span>  

> [!IMPORTANT]  
>  <span data-ttu-id="c9906-158">Si vous utilisez l'ensemble d'autorisations SUPER qui est fourni avec [!INCLUDE[d365fin](includes/d365fin_md.md)], les utilisateurs et vous-même disposez des autorisations pour exécuter tous les objets.</span><span class="sxs-lookup"><span data-stu-id="c9906-158">If you use the SUPER permissions set that comes with [!INCLUDE[d365fin](includes/d365fin_md.md)], you and your users have permissions to run all objects.</span></span> <span data-ttu-id="c9906-159">Dans ce cas, l'accès accordé à chaque utilisateur est uniquement limité par les autorisations relatives aux données.</span><span class="sxs-lookup"><span data-stu-id="c9906-159">In this case, access for each user is only limited by permissions for data.</span></span>  

## <a name="using-job-queues-effectively"></a><span data-ttu-id="c9906-160">Utilisation efficace des files d'attente des travaux</span><span class="sxs-lookup"><span data-stu-id="c9906-160">Using Job Queues Effectively</span></span>  
<span data-ttu-id="c9906-161">L'enregistrement des écritures file d'attente des travaux possède plusieurs champs dont l'objectif est d'exécuter des paramètres dans un codeunit que vous avez indiqué comme devant être exécuté avec une file d'attente des travaux.</span><span class="sxs-lookup"><span data-stu-id="c9906-161">The job queue entry record has many fields whose purpose is to carry parameters into a codeunit that you have specified to be run with a job queue.</span></span> <span data-ttu-id="c9906-162">Cela signifie également que les codeunits devant être exécutés via la file d'attente des travaux doivent être indiqués avec l'enregistrement des écritures file d'attente des travaux en tant que paramètre dans le déclencheur **OnRun**.</span><span class="sxs-lookup"><span data-stu-id="c9906-162">This also means that codeunits that are to be run via the job queue must be specified with the Job Queue Entry record as a parameter in the **OnRun** trigger.</span></span> <span data-ttu-id="c9906-163">Un niveau de sécurité supplémentaire est ainsi assuré, car les utilisateurs ne peuvent pas exécuter de codeunits aléatoires via la file d'attente des travaux.</span><span class="sxs-lookup"><span data-stu-id="c9906-163">This helps provide an extra level of security, as this prevents users from running random codeunits via the job queue.</span></span> <span data-ttu-id="c9906-164">Si l'utilisateur doit transmettre des paramètres à un état, il n'a d'autre choix que celui d'inclure l'exécution de l'état dans un codeunit, lequel analyse ensuite les paramètres d'entrée et les intègre dans l'état avant de l'exécuter.</span><span class="sxs-lookup"><span data-stu-id="c9906-164">If the user must pass parameters to a report, the only way to do this is by wrapping the report execution into a codeunit, which then parses the input parameters and enters them into the report before executing it.</span></span>  

## <a name="see-also"></a><span data-ttu-id="c9906-165">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="c9906-165">See Also</span></span>  
[<span data-ttu-id="c9906-166">Configuration et administration dans Dynamics 365 for Financials</span><span class="sxs-lookup"><span data-stu-id="c9906-166">Setup and Administration in Dynamics 365 for Financials</span></span>](admin-setup-and-administration.md)  
[<span data-ttu-id="c9906-167">Configuration de Dynamics 365 for Financials</span><span class="sxs-lookup"><span data-stu-id="c9906-167">Setting Up Dynamics 365 for Financials</span></span>](setup.md)  

