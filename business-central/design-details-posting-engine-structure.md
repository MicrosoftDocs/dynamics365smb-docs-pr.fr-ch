---
title: Détails de conception- Structure du moteur de validation | Microsoft Docs
description: L'interface de validation et certaines autres fonctions dans le codeunit 12 utilisent des fonctions de moteur de validation pour préparer et insérer l'écriture comptable et les enregistrements d'écriture TVA. Le moteur de validation est également chargé de la création de registre du grand livre.
services: project-madeira
documentationcenter: ''
author: SorenGP
ms.service: dynamics365-business-central
ms.topic: article
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: ''
ms.date: 10/01/2018
ms.author: sgroespe
ms.openlocfilehash: 58a319db86be7a93467a624b56fafc0da122c7fb
ms.sourcegitcommit: 1bcfaa99ea302e6b84b8361ca02730b135557fc1
ms.translationtype: HT
ms.contentlocale: fr-CH
ms.lasthandoff: 03/08/2019
ms.locfileid: "820843"
---
# <a name="design-details-posting-engine-structure"></a><span data-ttu-id="ca506-104">Détails de conception : Structure du moteur de validation</span><span class="sxs-lookup"><span data-stu-id="ca506-104">Design Details: Posting Engine Structure</span></span>
<span data-ttu-id="ca506-105">L'interface de validation et certaines autres fonctions dans le codeunit 12 utilisent des fonctions de moteur de validation pour préparer et insérer l'écriture comptable et les enregistrements d'écriture TVA.</span><span class="sxs-lookup"><span data-stu-id="ca506-105">Posting interface and some other functions in codeunit 12 use posting engine functions to prepare and insert general ledger entry and VAT entry records.</span></span> <span data-ttu-id="ca506-106">Le moteur de validation est également chargé de la création de registre du grand livre.</span><span class="sxs-lookup"><span data-stu-id="ca506-106">The posting engine is also responsible for general ledger register creation.</span></span>  
  
 <span data-ttu-id="ca506-107">Les fonctions du tableau suivant fournissent un cadre standard pour créer les procédures de validation (par exemple le code, CustPostApplyCustledgEntry, VendPostApplyVendLedgEntry, UnapplyCustLedgEntry, et UnapplyVendLedgEntry et Reverse) et un accès exclusif au tableau 17, G/L Entry.</span><span class="sxs-lookup"><span data-stu-id="ca506-107">The functions in the following table provide a standard framework for designing posting procedures (such as Code, CustPostApplyCustledgEntry, VendPostApplyVendLedgEntry, UnapplyCustLedgEntry, UnapplyVendLedgEntry, and Reverse) and exclusive access to table 17, G/L Entry.</span></span>  
  
|<span data-ttu-id="ca506-108">Routine</span><span class="sxs-lookup"><span data-stu-id="ca506-108">Routine</span></span>|<span data-ttu-id="ca506-109">Désignation</span><span class="sxs-lookup"><span data-stu-id="ca506-109">Description</span></span>|  
|-------------|---------------------------------------|  
|<span data-ttu-id="ca506-110">StartPosting</span><span class="sxs-lookup"><span data-stu-id="ca506-110">StartPosting</span></span>|<span data-ttu-id="ca506-111">Initialise le tampon de validation TempGLEntryBuf, verrouille les tableaix d'écriture comptable et écriture TVA, et initialise la période de comptabilité, le registre de comptabilité et le taux de change.</span><span class="sxs-lookup"><span data-stu-id="ca506-111">Initializes posting buffer TempGLEntryBuf, locks G/L Entry and VAT Entry tables, and initializes Accounting Period, G/L Register, and Exchange Rate.</span></span> <span data-ttu-id="ca506-112">Ne devrait être appelé qu'une fois, alors NextEntryNo est 0.</span><span class="sxs-lookup"><span data-stu-id="ca506-112">Should be called only once, then NextEntryNo is 0.</span></span>|  
|<span data-ttu-id="ca506-113">ContinuePosting</span><span class="sxs-lookup"><span data-stu-id="ca506-113">ContinuePosting</span></span>|<span data-ttu-id="ca506-114">Vérifie et valide la TVA sur encaissement pour le précédent incrément de transaction NextTransactionNo et prépare la validation de la ligne suivante.</span><span class="sxs-lookup"><span data-stu-id="ca506-114">Checks and posts unrealized VAT for previous transaction increment NextTransactionNo and prepares post of next line.</span></span>|  
|<span data-ttu-id="ca506-115">FinishPosting</span><span class="sxs-lookup"><span data-stu-id="ca506-115">FinishPosting</span></span>|<span data-ttu-id="ca506-116">Renseigne la validation en insérant des écritures comptables à partir de tampon temporaire dans le tableau de base de données.</span><span class="sxs-lookup"><span data-stu-id="ca506-116">Completes posting by inserting G/L entries from temporary buffer into database table.</span></span> <span data-ttu-id="ca506-117">Toujours utilisé avec StartPosting.</span><span class="sxs-lookup"><span data-stu-id="ca506-117">Always used together with StartPosting.</span></span> <span data-ttu-id="ca506-118">Vérifie les incohérences.</span><span class="sxs-lookup"><span data-stu-id="ca506-118">Checks for inconsistencies.</span></span>|  
|<span data-ttu-id="ca506-119">InitGLEntry</span><span class="sxs-lookup"><span data-stu-id="ca506-119">InitGLEntry</span></span>|<span data-ttu-id="ca506-120">Utilisé pour lancer la nouvelle écriture comptable pour Gen. Jnl Line.</span><span class="sxs-lookup"><span data-stu-id="ca506-120">Used to initialize new G/L entry for Gen. Jnl Line.</span></span> <span data-ttu-id="ca506-121">Retourne GLEntry comme paramètre.</span><span class="sxs-lookup"><span data-stu-id="ca506-121">Returns GLEntry as parameter.</span></span>|  
|<span data-ttu-id="ca506-122">InitGLEntryVAT</span><span class="sxs-lookup"><span data-stu-id="ca506-122">InitGLEntryVAT</span></span>|<span data-ttu-id="ca506-123">Semblable à InitGLEntry, mais affecte également Numéro de compte contrepartie et SummarizeVAT.</span><span class="sxs-lookup"><span data-stu-id="ca506-123">Same as InitGLEntry, but also assigns Bal. Account No. and SummarizeVAT.</span></span>|  
|<span data-ttu-id="ca506-124">InitGLEntryVATCopy</span><span class="sxs-lookup"><span data-stu-id="ca506-124">InitGLEntryVATCopy</span></span>|<span data-ttu-id="ca506-125">Semblable à InitGLEntryVAT, mais copie également les données des groupes de validation de l'écriture TVA avant SummarizeVAT.</span><span class="sxs-lookup"><span data-stu-id="ca506-125">Similar to InitGLEntryVAT, but also copies posting groups data from VAT Entry before SummarizeVAT.</span></span>|  
|<span data-ttu-id="ca506-126">InsertGLEntry</span><span class="sxs-lookup"><span data-stu-id="ca506-126">InsertGLEntry</span></span>|<span data-ttu-id="ca506-127">La seule fonction qui insère l'écriture comptable dans le tableau TempGLEntryBuf global.</span><span class="sxs-lookup"><span data-stu-id="ca506-127">The only function that inserts G/L entry into global TempGLEntryBuf table.</span></span> <span data-ttu-id="ca506-128">Utilisez toujours cette fonction pour insérer.</span><span class="sxs-lookup"><span data-stu-id="ca506-128">Always use this function for insert.</span></span>|  
|<span data-ttu-id="ca506-129">CreateGLEntry</span><span class="sxs-lookup"><span data-stu-id="ca506-129">CreateGLEntry</span></span>|<span data-ttu-id="ca506-130">Exécute InitGLEntry, affecte le montant des devises supplémentaires, puis exécute InsertGLEntry.</span><span class="sxs-lookup"><span data-stu-id="ca506-130">Performs an InitGLEntry, assigns Additional Currency Amount, and then performs InsertGLEntry.</span></span> <span data-ttu-id="ca506-131">Remplace plusieurs lignes de code avec un seul appel de fonction.</span><span class="sxs-lookup"><span data-stu-id="ca506-131">Replaces several lines of code with a single function call.</span></span>|  
|<span data-ttu-id="ca506-132">CreateGLEntryBalAcc</span><span class="sxs-lookup"><span data-stu-id="ca506-132">CreateGLEntryBalAcc</span></span>|<span data-ttu-id="ca506-133">Semblable à CreateGLEntry, mais affecte également Type de compte contrepartie et Numéro de compte contrepartie.</span><span class="sxs-lookup"><span data-stu-id="ca506-133">Same as CreateGLEntry, but also assigns Bal. Account Type and Bal. Account No.</span></span>|  
|<span data-ttu-id="ca506-134">CreateGLEntryVAT</span><span class="sxs-lookup"><span data-stu-id="ca506-134">CreateGLEntryVAT</span></span>|<span data-ttu-id="ca506-135">Semblable à CreateGLEntry, mais avec le traitement supplémentaire pour les groupes de validation et l'enregistrement sur un tampon TVA temporaire :</span><span class="sxs-lookup"><span data-stu-id="ca506-135">Same as CreateGLEntry, but with additional processing for posting groups and saving to temporary VAT buffer:</span></span><br /><br /> `GLEntry.CopyPostingGroupsFromDtldCVBuf(DtldCVLedgEntryBuf,GenJnlLine."Gen. Posting Type");`<br /><br /> `InsertVATEntriesFromTemp(DtldCVLedgEntryBuf,GLEntry);`|  
|<span data-ttu-id="ca506-136">CreateGLEntryVATCollectAdj</span><span class="sxs-lookup"><span data-stu-id="ca506-136">CreateGLEntryVATCollectAdj</span></span>|<span data-ttu-id="ca506-137">Semblable à CreateGLEntry, mais avec la collection supplémentaire des ajustements et l'enregistrement sur un tampon TVA temporaire :</span><span class="sxs-lookup"><span data-stu-id="ca506-137">Same as CreateGLEntry, but with additional collection of adjustments and saving to temporary VAT buffer:</span></span><br /><br /> `CollectAdjustment(AdjAmount,GLEntry.Amount,GLEntry."Additional-Currency Amount",OriginalDateSet);`<br /><br /> `InsertVATEntriesFromTemp(DtldCVLedgEntryBuf,GLEntry);`|  
|<span data-ttu-id="ca506-138">CreateGLEntryFromVATEntry</span><span class="sxs-lookup"><span data-stu-id="ca506-138">CreateGLEntryFromVATEntry</span></span>|<span data-ttu-id="ca506-139">Semblable à CreateGLEntry, mais copie également les groupes de validation à partir de l'écriture TVA.</span><span class="sxs-lookup"><span data-stu-id="ca506-139">Same as CreateGLEntry, but also copies posting groups from VAT entry.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="ca506-140">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="ca506-140">See Also</span></span>  
 [<span data-ttu-id="ca506-141">Détails de conception : Structure de l'interface de validation</span><span class="sxs-lookup"><span data-stu-id="ca506-141">Design Details: Posting Interface Structure</span></span>](design-details-posting-interface-structure.md)