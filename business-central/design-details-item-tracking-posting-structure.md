---
title: Détails de conception - Structure de validation de traçabilité | Microsoft Docs
description: Découvrez comment utiliser les écritures comptables article comme principal opérateur des numéros traçabilité.
services: project-madeira
documentationcenter: ''
author: SorenGP
ms.service: dynamics365-business-central
ms.topic: article
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: design, item tracking, posting, inventory
ms.date: 10/01/2018
ms.author: sgroespe
ms.openlocfilehash: b2cb135991a067b86b7c5579e0386ffd199aefcf
ms.sourcegitcommit: 1bcfaa99ea302e6b84b8361ca02730b135557fc1
ms.translationtype: HT
ms.contentlocale: fr-CH
ms.lasthandoff: 03/08/2019
ms.locfileid: "821463"
---
# <a name="design-details-item-tracking-posting-structure"></a><span data-ttu-id="0426e-103">Détails de conception : structure de validation de traçabilité</span><span class="sxs-lookup"><span data-stu-id="0426e-103">Design Details: Item Tracking Posting Structure</span></span>
<span data-ttu-id="0426e-104">Pour s'aligner sur la fonctionnalité d'évaluation du stock et obtenir une solution plus simple et plus robuste, les écritures comptables article sont utilisées comme principal opérateur des numéros de suivi d'article.</span><span class="sxs-lookup"><span data-stu-id="0426e-104">To align with inventory costing functionality and to obtain a simpler and more robust solution, item ledger entries are used as the primary carrier of item tracking numbers.</span></span>  
  
<span data-ttu-id="0426e-105">Les numéros traçabilité sur les entités réseau de commande et les entités réseau sans rapport avec les commandes sont spécifiés dans la table **Ecriture réservation** (T337).</span><span class="sxs-lookup"><span data-stu-id="0426e-105">Item tracking numbers on order network entities and non-order network entities are specified in the **Reservation Entry** table (T337).</span></span> <span data-ttu-id="0426e-106">Des numéros traçabilité qui sont liés aux informations historiques sont récupérés directement à partir des écritures comptables article qui sont associées à la transaction en question.</span><span class="sxs-lookup"><span data-stu-id="0426e-106">Item tracking numbers that are related to historical information are retrieved directly from the item ledger entries that are related to the transaction in question.</span></span> <span data-ttu-id="0426e-107">Cela signifie que les écritures comptables article reflètent la spécification de suivi d'article de la ligne de commande validée.</span><span class="sxs-lookup"><span data-stu-id="0426e-107">This means that item ledger entries reflect the item tracking specification of the posted order line.</span></span>  
  
<span data-ttu-id="0426e-108">La page **Lignes traçabilité** extrait les informations de T337 et les écritures comptables article et les affiche par le biais de la table temporaire, **Spécification traçabilité** (T336).</span><span class="sxs-lookup"><span data-stu-id="0426e-108">The **Item Tracking Lines** page retrieves the information from T337 and the item ledger entries and shows it through the temporary table, **Tracking Specification** (T336).</span></span> <span data-ttu-id="0426e-109">T336 contient également les données temporaires dans la **page lignes traçabilité** pour les quantités de traçabilité article restant à facturer.</span><span class="sxs-lookup"><span data-stu-id="0426e-109">T336 also hold the temporary data in the **Item Tracking Lines page** for item tracking quantities that remain to be invoiced.</span></span>  
  
## <a name="one-to-many-relation"></a><span data-ttu-id="0426e-110">Relation un-à-plusieurs</span><span class="sxs-lookup"><span data-stu-id="0426e-110">One-to-Many Relation</span></span>  
<span data-ttu-id="0426e-111">La table **Lien écriture article**, qui sert à lier une ligne document validée avec ses écritures comptables article correspondantes, est composée de deux parties principales :</span><span class="sxs-lookup"><span data-stu-id="0426e-111">The **Item Entry Relation** table, which is used to link a posted document line with its related item ledger entries, consists of two main parts:</span></span>  
  
* <span data-ttu-id="0426e-112">Un pointeur vers la ligne document validée, le champ **N° ligne commande**.</span><span class="sxs-lookup"><span data-stu-id="0426e-112">A pointer to the posted document line, the **Order Line No.**</span></span> <span data-ttu-id="0426e-113">.</span><span class="sxs-lookup"><span data-stu-id="0426e-113">field.</span></span>  
* <span data-ttu-id="0426e-114">Un numéro de séquence pointant vers une écriture comptable article, le champ **N° écriture article**.</span><span class="sxs-lookup"><span data-stu-id="0426e-114">An entry number pointing to an item ledger entry, the **Item Entry No.** field.</span></span>  
  
<span data-ttu-id="0426e-115">La fonctionnalité du champ **N° séquence** existant, qui relie une écriture comptable article à une ligne document validé, gère la relation typique un pour un lorsqu'aucun numéro traçabilité n'est indiqué dans la ligne document validé.</span><span class="sxs-lookup"><span data-stu-id="0426e-115">The functionality of the existing **Entry No.** field, which relates an item ledger entry to a posted document line, handles the typical one-to-one relation when no item tracking numbers exist on the posted document line.</span></span> <span data-ttu-id="0426e-116">Si des numéros traçabilité existent, le champ **N° séquence** est laissé vide, et la relation un à plusieurs est gérée par la table **Lien écriture article**.</span><span class="sxs-lookup"><span data-stu-id="0426e-116">If item tracking numbers exist, then the **Entry No.** field is left blank, and the one-to-many relation is handled by the **Item Entry Relation** table.</span></span> <span data-ttu-id="0426e-117">Si la ligne document validée possède des numéros traçabilité mais n'est liée qu'à une seule écriture comptable article, le champ **N° séquence** gère la relation, et le n° d'enregistrement est créé dans la table **Lien écriture article**.</span><span class="sxs-lookup"><span data-stu-id="0426e-117">If the posted document line carries item tracking numbers but only relates to a single item ledger entry, then the **Entry No.** field handles the relation, and the no record is created in the **Item Entry Relation** table.</span></span>  
  
## <a name="codeunits-80-and-90"></a><span data-ttu-id="0426e-118">Codeunits 80 et 90</span><span class="sxs-lookup"><span data-stu-id="0426e-118">Codeunits 80 and 90</span></span>  
<span data-ttu-id="0426e-119">Pour répartir les écritures comptables article lors de la validation, le code dans codeunit 80 et codeunit 90 est encerclé par des boucles qui s'exécutent à travers des variables de bilan temporaire global.</span><span class="sxs-lookup"><span data-stu-id="0426e-119">To split the item ledger entries during posting, the code in codeunit 80 and codeunit 90, is encircled by loops that run through global temporary record variables.</span></span> <span data-ttu-id="0426e-120">Ce code appelle codeunit 22 avec une ligne feuille article.</span><span class="sxs-lookup"><span data-stu-id="0426e-120">This code calls codeunit 22 with an item journal line.</span></span> <span data-ttu-id="0426e-121">Ces variables sont initialisées lorsque les numéros de suivi des articles existent pour la ligne document.</span><span class="sxs-lookup"><span data-stu-id="0426e-121">These variables are initialized when item tracking numbers exist for the document line.</span></span> <span data-ttu-id="0426e-122">Pour garder un code simple, cette structure de bouclage est toujours utilisée.</span><span class="sxs-lookup"><span data-stu-id="0426e-122">To keep the code simple, this looping structure is always used.</span></span> <span data-ttu-id="0426e-123">Si aucun numéro traçabilité n'existe pour la ligne document, un enregistrement unique est inséré, et la boucle ne s'exécute qu'une fois.</span><span class="sxs-lookup"><span data-stu-id="0426e-123">If no item tracking numbers exist for the document line, then a single record is inserted, and the loop runs only once.</span></span>  
  
## <a name="posting-the-item-journal"></a><span data-ttu-id="0426e-124">Validation de la feuille article</span><span class="sxs-lookup"><span data-stu-id="0426e-124">Posting the Item Journal</span></span>  
<span data-ttu-id="0426e-125">Des numéros traçabilité sont transférés via des écritures réservation en relation avec l'écriture comptable article, et le bouclage par l'intermédiaire des numéros traçabilité se produit dans le codeunit 22.</span><span class="sxs-lookup"><span data-stu-id="0426e-125">Item tracking numbers are transferred via the reservation entries that relate to the item ledger entry, and the looping through item tracking numbers occurs in codeunit 22.</span></span> <span data-ttu-id="0426e-126">Ce concept fonctionne de la même manière lorsqu'une ligne feuille article est utilisée indirectement pour valider une commande vente ou achat que lorsqu'une ligne feuille article est utilisée directement.</span><span class="sxs-lookup"><span data-stu-id="0426e-126">This concept works in the same way when an item journal line is used indirectly to post a sale or purchase order as when an item journal line is used directly.</span></span> <span data-ttu-id="0426e-127">Lorsque la feuille article est utilisée directement, le champ **Lien origine** pointe vers la ligne feuille article elle-même.</span><span class="sxs-lookup"><span data-stu-id="0426e-127">When the item journal is used directly, the **Source Row ID** field points to the item journal line itself.</span></span>  
  
## <a name="code-unit-22"></a><span data-ttu-id="0426e-128">Unité de code 22</span><span class="sxs-lookup"><span data-stu-id="0426e-128">Code Unit 22</span></span>  
<span data-ttu-id="0426e-129">Codeunits 80 et 90 bouclent l'appel du codeunit 22 lors de la validation de facture des numéros traçabilité et lors de la facturation des expéditions ou des réceptions existantes.</span><span class="sxs-lookup"><span data-stu-id="0426e-129">Codeunits 80 and 90 loop the call of codeunit 22 during the invoice posting of item tracking numbers and during the invoicing of existing shipments or receipts.</span></span>  
  
<span data-ttu-id="0426e-130">Lors de la validation de quantité des numéros traçabilité, le codeunit 22 extrait les numéros traçabilité des écritures dans T337 liées à la validation.</span><span class="sxs-lookup"><span data-stu-id="0426e-130">During quantity posting of item tracking numbers, codeunit 22 retrieves item tracking numbers from the entries in T337 that relate to the posting.</span></span> <span data-ttu-id="0426e-131">Ces écritures sont placées directement sur la ligne feuille article.</span><span class="sxs-lookup"><span data-stu-id="0426e-131">These entries are placed directly on the item journal line.</span></span>  
  
<span data-ttu-id="0426e-132">Codeunit 22 boucle via les numéros traçabilité et répartit la validation dans les écritures comptables article correspondantes qui contiennent les numéros traçabilité.</span><span class="sxs-lookup"><span data-stu-id="0426e-132">Codeunit 22 loops through the item tracking numbers and splits the posting into the respective item ledger entries that carry the item tracking numbers.</span></span> <span data-ttu-id="0426e-133">Les informations sur les écritures comptables article qui sont créées sont renvoyées à T337 à l'aide d'un enregistrement temporaire T336, qui est appelé par une procédure dans le codeunit 22.</span><span class="sxs-lookup"><span data-stu-id="0426e-133">Information about which item ledger entries are created is returned to T337 by using a temporary T336 record, which is called by a procedure in codeunit 22.</span></span> <span data-ttu-id="0426e-134">Cette procédure est déclenchée lorsque le codeunit 22 a terminé son exécution car à ce stade, l'objet du codeunit 22 contient les informations.</span><span class="sxs-lookup"><span data-stu-id="0426e-134">This procedure is triggered when codeunit 22 has finished its run because at that point, the codeunit 22 object contains the information.</span></span> <span data-ttu-id="0426e-135">Lorsque l'enregistrement temporaire T336 est récupéré, les codeunits 80 et 90 créent des enregistrements dans le tableau **Lien écriture article** pour lier les écritures comptables article créées à l'expédition ou la ligne de réception créée.</span><span class="sxs-lookup"><span data-stu-id="0426e-135">When the temporary T336 record is retrieved, codeunits 80 and 90 create records in the **Item Entry Relation** table to link the created item ledger entries to the created shipment or receipt line.</span></span> <span data-ttu-id="0426e-136">Codeunits 80 ou codeunit 90 convertit ensuite les enregistrements T336 temporaires en enregistrements réels T336 liés à la ligne en question.</span><span class="sxs-lookup"><span data-stu-id="0426e-136">Codeunits 80 or codeunit 90 then converts the temporary T336 records to real T336 records that are related to the line in question.</span></span> <span data-ttu-id="0426e-137">Cependant, cette conversion se produit uniquement si la ligne document validée n'est pas supprimée, parce qu'elle n'est que partiellement validée.</span><span class="sxs-lookup"><span data-stu-id="0426e-137">However, this conversion occurs only if the posted document line is not deleted, because it is only partially posted.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0426e-138">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="0426e-138">See Also</span></span>  
<span data-ttu-id="0426e-139">[Détails de conception : traçabilité](design-details-item-tracking.md) </span><span class="sxs-lookup"><span data-stu-id="0426e-139">[Design Details: Item Tracking](design-details-item-tracking.md) </span></span>  
[<span data-ttu-id="0426e-140">Détails de conception : création de traçabilité</span><span class="sxs-lookup"><span data-stu-id="0426e-140">Design Details: Item Tracking Design</span></span>](design-details-item-tracking-design.md)