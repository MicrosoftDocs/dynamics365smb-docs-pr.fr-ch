---
title: Gérer le stockage en supprimant des documents ou en compressant des données
description: Découvrez comment conserver vos données historiques en compressant les écritures comptables ou en les supprimant.
author: edupont04
ms.service: dynamics365-business-central
ms.topic: conceptual
ms.date: 10/01/2020
ms.author: edupont
ms.openlocfilehash: b17e4df039ef713bf5c0048d258aefd175157ba4
ms.sourcegitcommit: a9d48272ce61e5d512a30417412b5363e56abf30
ms.translationtype: HT
ms.contentlocale: fr-CH
ms.lasthandoff: 03/04/2021
ms.locfileid: "5493062"
---
# <a name="manage-storage-by-deleting-documents-or-compressing-data"></a><span data-ttu-id="30412-103">Gérer le stockage en supprimant des documents ou en compressant des données</span><span class="sxs-lookup"><span data-stu-id="30412-103">Manage Storage by Deleting Documents or Compressing Data</span></span>

<span data-ttu-id="30412-104">Un rôle central, par exemple un administrateur d’application, doit régulièrement gérer les documents accumulés au fil du temps en les supprimant ou en les compressant.</span><span class="sxs-lookup"><span data-stu-id="30412-104">A central role, such as the application administrator, must regularly deal with accumulating historic documents by deleting or compressing them.</span></span>  

> [!TIP]
> <span data-ttu-id="30412-105">Pour plus d’informations sur les autres moyens de réduire la quantité de données stockées dans une base de données, voir [Réduction des données stockées dans les bases de données Business Central](/dynamics365/business-central/dev-itpro/administration/database-reduce-data) dans l’aide dédiée à l’équipe IT et aux développeurs.</span><span class="sxs-lookup"><span data-stu-id="30412-105">For information about other ways to reduce the amount of data stored in a database, see [Reducing Data Stored in Business Central Databases](/dynamics365/business-central/dev-itpro/administration/database-reduce-data) in the Developer and IT pro help.</span></span>

## <a name="delete-documents"></a><span data-ttu-id="30412-106">Supprimer documents</span><span class="sxs-lookup"><span data-stu-id="30412-106">Delete Documents</span></span>

<span data-ttu-id="30412-107">Dans certains cas, vous pouvez souhaiter supprimer des commandes achat facturées qui n’ont pas été supprimées.</span><span class="sxs-lookup"><span data-stu-id="30412-107">In certain situations, you may need to delete invoiced purchase orders that have not been deleted.</span></span> [!INCLUDE[prod_short](includes/prod_short.md)] <span data-ttu-id="30412-108">vérifie que vous avez entièrement facturé les commandes achat supprimées.</span><span class="sxs-lookup"><span data-stu-id="30412-108">checks that you have fully invoiced the deleted purchase orders.</span></span> <span data-ttu-id="30412-109">Vous ne pouvez pas supprimer de commandes qui n’ont pas été entièrement facturées et reçues.</span><span class="sxs-lookup"><span data-stu-id="30412-109">You cannot delete orders that you have not fully invoiced and received.</span></span>  

<span data-ttu-id="30412-110">Les retours sont généralement supprimés après leur facturation.</span><span class="sxs-lookup"><span data-stu-id="30412-110">Return orders are usually deleted after they are invoiced.</span></span> <span data-ttu-id="30412-111">Lorsque vous validez une facture, elle est transférée vers la page **Avoir achat enregistré**.</span><span class="sxs-lookup"><span data-stu-id="30412-111">When you post an invoice, it is transferred to the **Posted Purchase Credit Memo** page.</span></span> <span data-ttu-id="30412-112">Si vous avez activé la case à cocher **Expédition retour sur avoir** sur la page **Paramètres achats**, la facture est transférée vers la page **Expédition retour enregistrée**.</span><span class="sxs-lookup"><span data-stu-id="30412-112">If you selected the **Return Shipment on Credit Memo** check box on the **Purchases & Payable Setup** page, then the invoice is transferred to the **Posted Return Shipment** page.</span></span> <span data-ttu-id="30412-113">Vous pouvez supprimer les documents à l’aide du traitement par lots **Supprimer les retours achat facturés**.</span><span class="sxs-lookup"><span data-stu-id="30412-113">You can delete the documents using the **Delete Invd Purch. Ret. Orders** batch job.</span></span> <span data-ttu-id="30412-114">Avant de procéder à la suppression, le traitement par lots vérifie que les retours achat ont été entièrement livrés et facturés.</span><span class="sxs-lookup"><span data-stu-id="30412-114">Before deleting, the batch job checks if the purchase return orders are fully shipped and invoiced.</span></span>  

<span data-ttu-id="30412-115">Les commandes ouvertes achat ne sont pas supprimées une fois que toutes les commandes achat associées ont été traitées et facturées.</span><span class="sxs-lookup"><span data-stu-id="30412-115">Blanket purchase orders are not deleted after you have processed and invoiced all the related purchase orders.</span></span> <span data-ttu-id="30412-116">Vous pouvez supprimer les commandes ouvertes à l’aide du traitement par lots **Supprimer commandes ouvertes achat facturées**.</span><span class="sxs-lookup"><span data-stu-id="30412-116">You can delete blanket orders with the **Delete Invoiced Blanket Purchase Orders** batch job.</span></span>  

<span data-ttu-id="30412-117">Les commandes service facturées sont habituellement supprimées automatiquement après avoir été entièrement facturées.</span><span class="sxs-lookup"><span data-stu-id="30412-117">Invoiced service orders are usually deleted automatically after having been fully invoiced.</span></span> <span data-ttu-id="30412-118">Lors de la validation d’une facture, une écriture correspondante est générée sur la page **Factures service enreg.**.</span><span class="sxs-lookup"><span data-stu-id="30412-118">When an invoice is posted, a corresponding entry is created on the **Posted Service Invoices** page.</span></span> <span data-ttu-id="30412-119">Vous pouvez afficher le document validé sur la page **Facture service enreg.**.</span><span class="sxs-lookup"><span data-stu-id="30412-119">The posted document can be viewed on the **Posted Service Invoice** page.</span></span>  

<span data-ttu-id="30412-120">Le programme ne supprime pas la commande service automatiquement cependant, si la quantité totale sur la commande a été validée, non pas à partir de la commande service proprement dite, mais à partir de la page **Facture service**.</span><span class="sxs-lookup"><span data-stu-id="30412-120">Service orders are not deleted automatically, however, if the total quantity on the order has been posted not from the service order itself, but from the **Service Invoice** page.</span></span> <span data-ttu-id="30412-121">Ensuite, il se peut que vous deviez supprimer des commandes facturées qui n’ont pas été supprimées.</span><span class="sxs-lookup"><span data-stu-id="30412-121">Then you may need to delete invoiced orders that were not deleted.</span></span> <span data-ttu-id="30412-122">Pour ce faire, exécutez le traitement par lots **Supprimer commandes service facturées**.</span><span class="sxs-lookup"><span data-stu-id="30412-122">You can do this by running the **Delete Invoiced Service Orders** batch job.</span></span>  

## <a name="compress-data-with-date-compression"></a><span data-ttu-id="30412-123">Compresser les données avec la compression selon la date</span><span class="sxs-lookup"><span data-stu-id="30412-123">Compress Data with Date Compression</span></span>

<span data-ttu-id="30412-124">Vous pouvez compresser les données dans [!INCLUDE [prod_short](includes/prod_short.md)] afin d’économiser de l’espace dans la base de données, qui dans [!INCLUDE [prod_short](includes/prod_short.md)] en ligne peut même vous faire économiser de l’argent.</span><span class="sxs-lookup"><span data-stu-id="30412-124">You can compress data in [!INCLUDE [prod_short](includes/prod_short.md)] so that you save space in the database, which in [!INCLUDE [prod_short](includes/prod_short.md)] online can even save you money.</span></span> <span data-ttu-id="30412-125">La compression est basée sur les dates et s’effectue en combinant plusieurs anciennes écritures en une nouvelle écriture.</span><span class="sxs-lookup"><span data-stu-id="30412-125">The compression is based on dates and works by combining several old entries into one new entry.</span></span> <span data-ttu-id="30412-126">Vous pouvez uniquement compresser des écritures d’exercices comptables clôturés, et seulement les écritures comptables fournisseur dont le champ **Ouvert** indique *Non*.</span><span class="sxs-lookup"><span data-stu-id="30412-126">You can compress entries from closed fiscal years only, and only vendor ledger entries where the **Open** field is set to *No*.</span></span>  

<span data-ttu-id="30412-127">Par exemple, les écritures comptables fournisseur d’exercices précédents peuvent être compressées de façon à ce qu’il ne reste qu’une écriture créditrice et une écriture débitrice par compte et par mois.</span><span class="sxs-lookup"><span data-stu-id="30412-127">For example, vendor ledger entries from previous fiscal years can be compressed so that there is only one credit and one debit entry per account per month.</span></span> <span data-ttu-id="30412-128">Le montant de la nouvelle écriture est la somme de toutes les écritures compressées.</span><span class="sxs-lookup"><span data-stu-id="30412-128">The amount in the new entry is the sum of all the compressed entries.</span></span> <span data-ttu-id="30412-129">La date affectée est la date de début de la période qui est compressée, par exemple le premier jour du mois (si les écritures sont compressées par mois).</span><span class="sxs-lookup"><span data-stu-id="30412-129">The date assigned is the starting date for the period that is compressed, such as the first day of the month (if the entries are compressed by month).</span></span> <span data-ttu-id="30412-130">Après la compression, vous pouvez encore afficher le solde période de chaque compte de l’exercice précédent.</span><span class="sxs-lookup"><span data-stu-id="30412-130">After the compression, you can still see the net change for each account in the previous fiscal year.</span></span>

<span data-ttu-id="30412-131">Le nombre d’écritures qui résultent d’un traitement par lots de compression dépend du nombre filtres que vous définissez, des champs qui sont combinés et de la durée de la période que vous choisissez.</span><span class="sxs-lookup"><span data-stu-id="30412-131">The number of entries that result from a date compression depends on how many filters you set, which fields are combined, and which period length you choose.</span></span> <span data-ttu-id="30412-132">Il y aura toujours au moins une écriture.</span><span class="sxs-lookup"><span data-stu-id="30412-132">There will always be at least one entry.</span></span> <span data-ttu-id="30412-133">Lorsque le traitement par lots est terminé, le résultat s’affiche dans la page **Historique des compressions**.</span><span class="sxs-lookup"><span data-stu-id="30412-133">When the batch job is finished, you can see the result in the **Date Compr. Registers** page.</span></span>

<span data-ttu-id="30412-134">Vous pouvez compresser les types de données suivants dans [!INCLUDE [prod_short](includes/prod_short.md)] à l’aide de traitements par lots :</span><span class="sxs-lookup"><span data-stu-id="30412-134">You can compress the following types of data in [!INCLUDE [prod_short](includes/prod_short.md)] using batch jobs:</span></span>

* <span data-ttu-id="30412-135">Écritures comptables compte bancaire</span><span class="sxs-lookup"><span data-stu-id="30412-135">Bank account ledger entries</span></span>

  <span data-ttu-id="30412-136">Après la compression, l’option **Conserver champs** vous permet de conserver la valeur des champs **N° document, Notre contact**, **Code axe principal 1** et **Code axe principal 2**.</span><span class="sxs-lookup"><span data-stu-id="30412-136">After the compression, with the **Retain Field Contents** facility, you can retain the contents of the **Document No., Our Contact**, **Global Dimension 1 Code**, and **Global Dimension 2 Code** fields.</span></span>
* <span data-ttu-id="30412-137">Écritures comptables fournisseur</span><span class="sxs-lookup"><span data-stu-id="30412-137">Vendor ledger entries</span></span>

> [!NOTE]
> <span data-ttu-id="30412-138">Les écritures compressées pour les clients, les fournisseurs, les banques et la comptabilité auxiliaire des immobilisations sont validées légèrement différemment de la comptabilisation standard.</span><span class="sxs-lookup"><span data-stu-id="30412-138">Compressed entries for customers, vendors, bank, and FA subledgers are posted slightly differently than standard posting.</span></span> <span data-ttu-id="30412-139">Cela permet de réduire le nombre de nouvelles écritures comptables créées par compression de date et est particulièrement important lorsque vous conservez des informations telles que les dimensions et les numéros de document.</span><span class="sxs-lookup"><span data-stu-id="30412-139">This is to reduce the number of new general ledger entries created by date compression, and is especially important when you keep information such as dimensions and document numbers.</span></span> <span data-ttu-id="30412-140">La compression de date crée de nouvelles entrées comme suit :</span><span class="sxs-lookup"><span data-stu-id="30412-140">Date compression creates new entries as follows:</span></span>
>* <span data-ttu-id="30412-141">Sur la page **Écritures comptables**, de nouvelles entrées sont créées avec de nouveaux numéros d’entrée pour les entrées compressées.</span><span class="sxs-lookup"><span data-stu-id="30412-141">On the **General Ledger Entries** page, new entries are created with new entry numbers for the compressed entries.</span></span> <span data-ttu-id="30412-142">Le champ **Description** contient l’information **Compression écritures** afin que les entrées compressées soient faciles à identifier.</span><span class="sxs-lookup"><span data-stu-id="30412-142">The **Description** field contains **Date Compressed** so that the compressed entries are easy to identify.</span></span> 
>* <span data-ttu-id="30412-143">Sur les pages comptables, telles que la page **Écritures comptables client**, une ou plusieurs entrées sont créées avec de nouveaux numéros d’entrée.</span><span class="sxs-lookup"><span data-stu-id="30412-143">On ledger pages, such as the **Customer Ledger Entries** page, one or more entries are created with new entry numbers.</span></span> 
> <span data-ttu-id="30412-144">Le processus de validation crée des écarts dans la série de numéros pour les entrées sur la page **Écritures comptables**.</span><span class="sxs-lookup"><span data-stu-id="30412-144">The posting process creates gaps in the number series for entries on the **General Ledger Entries** page.</span></span> <span data-ttu-id="30412-145">Ces numéros sont attribués aux écritures sur les pages comptables uniquement.</span><span class="sxs-lookup"><span data-stu-id="30412-145">Those numbers are assigned to the entries on the ledger pages only.</span></span> <span data-ttu-id="30412-146">La plage de numéros affectée aux entrées est disponible sur la **page de l’historique des transactions de comptabilité** dans les champs **N° séquence début** et **N° séquence fin**.</span><span class="sxs-lookup"><span data-stu-id="30412-146">The number range that was assigned to the entries is available on the **G/L Register page**  in the **From Entry No.** and **To Entry No.** fields.</span></span> 

<span data-ttu-id="30412-147">Après la compression, le contenu des champs suivants sera toujours conservé : **Date comptabilisation**, **N° fournisseur**, **Type de document**, **Code devise**, **Groupe comptabilisation**, **Montant**, **Montant ouvert**, **Montant initial DS**, **Montant ouvert DS**, **Montant DS**, **Achat DS**, **Remises facture DS**, **Escompte accordé DS** et **Escompte ouvert possible**.</span><span class="sxs-lookup"><span data-stu-id="30412-147">After the compression, the contents of the following fields are always retained: **Posting Date**, **Vendor No.**, **Document Type**, **Currency Code**, **Posting Group**, **Amount**, **Remaining Amount**, **Original Amt. (LCY)**, **Remaining Amt. (LCY)**, **Amount (LCY)**, **Purchase (LCY)**, **Inv. Discount (LCY)**, **Pmt. Disc. Given (LCY)**, and **Pmt. Disc. Possible**.</span></span>

  <span data-ttu-id="30412-148">Avec l’option **Conserver champs**, vous pouvez également conserver la valeur de ces champs supplémentaires : **N° document**, **N° fournisseur**, **Code acheteur**, **Code axe principal 1** et **Code axe principal 2**.</span><span class="sxs-lookup"><span data-stu-id="30412-148">With the **Retain Field Contents** facility, you can also retain the contents of these additional fields: **Document No.**, **Buy-from Vendor No.**, **Purchaser Code**, **Global Dimension 1 Code**, and **Global Dimension 2 Code**.</span></span>

> [!NOTE]
> <span data-ttu-id="30412-149">Après avoir exécuté la compression des dates, tous les comptes du grand livre sont verrouillés.</span><span class="sxs-lookup"><span data-stu-id="30412-149">After you run date compression, all accounts in the ledger are locked.</span></span> <span data-ttu-id="30412-150">Par exemple, vous ne pouvez pas désappliquer les écritures du fournisseur ou du grand livre bancaire pour les comptes au cours de la période pour laquelle les dates sont compressées.</span><span class="sxs-lookup"><span data-stu-id="30412-150">For example, you cannot un-apply vendor or bank ledger entries for any accounts during the period for which dates are compressed.</span></span>

<!--* General ledger entries
* Customer ledger entries-->
<!--* Fixed asset ledger entries
* G/L budget entries
* VAT entries

  After the compression the contents of the following fields are always retained: **Posting Date**, **Type**, **Closed**, **Gen. Bus. Posting Group**, **Gen. Prod. Posting Group**, **VAT Calculation Type**, **Base**, and **Amount**.

  With the **Retain Field Contents** facility, you can also retain the contents of the following additional fields: **Document No.**, **Bill-to/Pay-to No.**, **EU 3-Party Trade**, **Country/Region Code**, and **Internal Ref. No.**.
* Insurance ledger entries
* Maintenance ledger entries
* Resource ledger entries

  After the compression, the contents of the following fields are retained: **Posting Date**, **Resource No.**, **Resource Group No.**, **Entry Type**, **Quantity**, **Total Cost**, **Total Price**, and **Chargeable**.

  With the **Retain Field Contents** facility, you can also retain the contents of the following additional fields: **Document No.**, **Work Type Code**, **Job No.**, **Unit of Measure Code**, **Source Type**, **Source No.**. **Chargeable**, **
* Warehouse entries

  After the compression the contents of the following fields are always retained: **Registering Date**, **Location Code**, **Zone Code**, **Bin Code**, **Item No.**, **Quantity**, **Qty. (Base)**, **Bin Type Code**, **Entry Type**, **Variant Code**, **Qty. per Unit of Measure**, **Unit of Measure Code**, **Warranty Date**, **Expiration Date**, **Cubage**, and **Weight**.

  With the **Retain Field Contents** facility, you can also retain the contents of the **Serial No.** and **Lot No.** fields. -->

<span data-ttu-id="30412-151">Le nombre d’écritures qui résultent d’un traitement par lots de compression dépend du nombre filtres que vous définissez, des champs qui sont combinés et de la durée de la période que vous choisissez.</span><span class="sxs-lookup"><span data-stu-id="30412-151">The number of entries that result from a Date Compress batch job depends on how many filters you set, which fields are combined, and which period length you choose.</span></span> <span data-ttu-id="30412-152">Il y aura toujours au moins une écriture.</span><span class="sxs-lookup"><span data-stu-id="30412-152">There will always be at least one entry.</span></span> 

> [!WARNING]
> <span data-ttu-id="30412-153">La compression selon la date supprime des écritures ; vous devez donc toujours faire une sauvegarde de la base de données avant de lancer le traitement par lots.</span><span class="sxs-lookup"><span data-stu-id="30412-153">Date Compression deletes entries, so you should always make a backup copy of the database before you run the batch job.</span></span>

<span data-ttu-id="30412-154">Le tableau suivant répertorie les champs du raccourci **Options** disponibles sur tous les traitements par lots.</span><span class="sxs-lookup"><span data-stu-id="30412-154">The following table lists the fields on the **Options** FastTab that are available on all batch jobs.</span></span> <span data-ttu-id="30412-155">La section **Conserver le contenu du champ** comprend des champs supplémentaires qui sont décrits ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="30412-155">The **Retain Field Contents** section includes additional fields are described above.</span></span>

|<span data-ttu-id="30412-156">Champ</span><span class="sxs-lookup"><span data-stu-id="30412-156">Field</span></span>  |<span data-ttu-id="30412-157">Description</span><span class="sxs-lookup"><span data-stu-id="30412-157">Description</span></span>  |
|-------|-------------|
|<span data-ttu-id="30412-158">Date de début</span><span class="sxs-lookup"><span data-stu-id="30412-158">Starting Date</span></span>     |<span data-ttu-id="30412-159">Saisissez la première date à inclure dans la compression.</span><span class="sxs-lookup"><span data-stu-id="30412-159">Enter the first date to be included in the date compression.</span></span> <span data-ttu-id="30412-160">La compression affecte toutes les écritures comprises entre cette date et la date fin.</span><span class="sxs-lookup"><span data-stu-id="30412-160">The compression will affect all entries from this date to the Ending Date.</span></span>|
|<span data-ttu-id="30412-161">Date de fin</span><span class="sxs-lookup"><span data-stu-id="30412-161">Ending Date</span></span>     |<span data-ttu-id="30412-162">Saisissez la dernière date à inclure dans la compression.</span><span class="sxs-lookup"><span data-stu-id="30412-162">Enter the last date to be included in the date compression.</span></span> <span data-ttu-id="30412-163">La compression affecte toutes les écritures comprises entre la date début et cette date.</span><span class="sxs-lookup"><span data-stu-id="30412-163">The compression will affect all entries from the Starting Date to this date.</span></span>|
|<span data-ttu-id="30412-164">Base période</span><span class="sxs-lookup"><span data-stu-id="30412-164">Period Length</span></span> |<span data-ttu-id="30412-165">Sélectionnez la durée de la période pendant laquelle les écritures vont être combinées.</span><span class="sxs-lookup"><span data-stu-id="30412-165">Select the length of the period whose entries will be combined.</span></span> <span data-ttu-id="30412-166">Pour visualiser les options, cliquez sur le champ.</span><span class="sxs-lookup"><span data-stu-id="30412-166">Choose the field to see the options.</span></span> <span data-ttu-id="30412-167">Si vous sélectionnez la longueur de la période *Trimestre*, *Mois* ou *Semaine*, seules les écritures ayant une période comptable commune sont compressées.</span><span class="sxs-lookup"><span data-stu-id="30412-167">If you selected the period length *Quarter*, *Month*, or *Week*, only entries with a common accounting period are compressed.</span></span>|
|<span data-ttu-id="30412-168">Conserver champs</span><span class="sxs-lookup"><span data-stu-id="30412-168">Retain Field Contents</span></span>     |<span data-ttu-id="30412-169">Activez les champs si vous souhaitez conserver la valeur de certains champs bien que les écritures soient compressées.</span><span class="sxs-lookup"><span data-stu-id="30412-169">Place check marks in the boxes if you want to retain the contents of certain fields even though the entries are compressed.</span></span> <span data-ttu-id="30412-170">Plus vous choisissez de champs à conserver, plus les écritures compressées sont détaillées.</span><span class="sxs-lookup"><span data-stu-id="30412-170">The more fields you select, the more detailed the compressed entries will be.</span></span> <span data-ttu-id="30412-171">Si vous ne sélectionnez aucun champ, le traitement par lots crée une écriture par jour, par semaine, ou pour une autre période, selon la période sélectionnée dans le champ **Base période**.</span><span class="sxs-lookup"><span data-stu-id="30412-171">If you do not select any of these fields, the batch job will create one entry per day, week, or another period, according to the period selected in the **Period Length** field.</span></span> |

## <a name="see-also"></a><span data-ttu-id="30412-172">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="30412-172">See Also</span></span>

[<span data-ttu-id="30412-173">Administration</span><span class="sxs-lookup"><span data-stu-id="30412-173">Administration</span></span>](admin-setup-and-administration.md)  


[!INCLUDE[footer-include](includes/footer-banner.md)]